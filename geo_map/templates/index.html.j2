{% extends 'base/layout.html' %}
{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'geo_map/multiselect.css' %}">
{% endblock head %}
{% block content %}
<div class="relative" id="container">
    <div class="bg-surface-secondary d-flex mb-3 justify-content-between align-items-center">
        <div class="d-flex row-gap-3 col gap-3">
            <div class="select-container row-gap-3 gap-3">
                <select name="providerSelect" id="providerSelect" multiple multiselect-search="true"
                    class="multiselect-dropdown btn"
                    multiselect-select-all="true" multiselect-max-items="3" placeholder="Filter by Vendor">
                    {% for provider in providers %}
                    <option value="{{provider.value}}" data-color="{{provider.color}}">{{provider.label}}</option>
                    {% endfor %}
                </select>
                <select name="fiberLinkStatus" id="fiberLinkStatus" multiple multiselect-search="true"
                class="multiselect-dropdown btn"
                    multiselect-select-all="true" multiselect-max-items="3" placeholder="Filter by Fiber Link Status">
                    {% for status in link_statuses %}
                    <option value="{{status.value}}">{{status.label}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="select-container row-gap-3 gap-3">
                <select name="statusSelect" id="statusSelect" multiple multiselect-search="true"
                    class="multiselect-dropdown btn"
                    multiselect-select-all="true" multiselect-max-items="3" placeholder="Filter by POP Status">
                    {% for status in site_statuses %}
                    <option value="{{status.value}}">{{status.label}}</option>
                    {% endfor %}
                </select>
                <select name="groupSelect" id="groupSelect" multiple multiselect-search="true"
                    class="multiselect-dropdown btn"
                    multiselect-select-all="true" multiselect-max-items="3" placeholder="Filter by POP Groups">
                    {% for group in site_groups %}
                    <option value="{{group.label}}" {% if group.label == "Pit" %} selected class="checked" {% endif %}>
                        {{group.label}}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>
       
        <div class="d-flex flex-column align-self-end flex-wrap gap-2 ">
            <button id="actions-content" class="btn">
                Export Pops KML
            </button>
        </div>
    </div>
    <div id="map" style="height: 400px; width: 100%; position:relative;"></div>
</div>
<div id="loader" class="position-absolute top-50 start-50 translate-middle d-block">
    <div class="spinner-border text-primary" role="status" style="width: 5em; height: 5em;">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>
{% endblock content %}
{% block javascript %}
<script src="{% static 'geo_map/index.js' %}"></script>
<script async src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_key }}&callback=initMap&libraries=marker"></script>
<script src="{% static 'geo_map/multiselect.js' %}"></script>
{% endblock %}